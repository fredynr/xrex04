<div class="bg-stone-50 mx-4">
    <div class="flex bg-stone-50 rounded-sm shadow-md px-4 py-2">
        <div class="flex flex-col justify-around px-8 w-full">
            <div class="ml-2 text-xs text-gray-500">Descripción de los botones:</div>
            <div class="flex items-center border-1 w-fit ml-4">
                <div class="flex flex-col items-center bg-stone-100 m-2 p-2">
                    <svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px"
                        fill="#1ca30a">
                        <path
                            d="M224.62-160q-26.85 0-45.74-18.88Q160-197.77 160-224.62v-510.76q0-26.85 18.88-45.74Q197.77-800 224.62-800h510.76q26.85 0 45.74 18.88Q800-762.23 800-735.38v238q-10.54-3.62-20.15-5.89-9.62-2.27-19.85-4.5v-227.61q0-9.24-7.69-16.93-7.69-7.69-16.93-7.69H224.62q-9.24 0-16.93 7.69-7.69 7.69-7.69 16.93v510.76q0 9.24 7.69 16.93 7.69 7.69 16.93 7.69h226.61q1.46 11.23 3.73 20.85 2.27 9.61 5.89 19.15H224.62ZM200-240v40-560V-507.77v-3V-240Zm100-69.23h158.38q2.24-10.23 6.04-19.85 3.81-9.61 7.96-20.15H300v40ZM300-460h263.23q19.69-13.85 38.81-23.46 19.11-9.62 41.04-15.08V-500H300v40Zm0-150.77h360v-40H300v40ZM720-75.38q-66.85 0-113.42-46.58Q560-168.54 560-235.38q0-66.85 46.58-113.43 46.57-46.57 113.42-46.57t113.42 46.57Q880-302.23 880-235.38q0 66.84-46.58 113.42Q786.85-75.38 720-75.38ZM704.62-120h30.76v-100h100v-30.77h-100v-100h-30.76v100h-100V-220h100v100Z" />
                    </svg>
                    <span class="flex align-bottom text-xs text-gray-500 ml-2">
                        Realizar addendum
                    </span>
                </div>
                <div class="flex flex-col items-center bg-stone-100 m-2 p-2">
                    <svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px"
                        fill="#007595">
                        <path
                            d="M480.18-353.85q60.97 0 103.47-42.68t42.5-103.65q0-60.97-42.68-103.47t-103.65-42.5q-60.97 0-103.47 42.68t-42.5 103.65q0 60.97 42.68 103.47t103.65 42.5ZM480-392q-45 0-76.5-31.5T372-500q0-45 31.5-76.5T480-608q45 0 76.5 31.5T588-500q0 45-31.5 76.5T480-392Zm.11 152q-129.96 0-236.88-70.73Q136.31-381.46 83.08-500q53.23-118.54 160.04-189.27T479.89-760q129.96 0 236.88 70.73Q823.69-618.54 876.92-500q-53.23 118.54-160.04 189.27T480.11-240ZM480-500Zm0 220q113 0 207.5-59.5T832-500q-50-101-144.5-160.5T480-720q-113 0-207.5 59.5T128-500q50 101 144.5 160.5T480-280Z" />
                    </svg>
                    <span class="flex align-bottom text-xs text-gray-500 ml-2">
                        Ver detalles
                    </span>
                </div>
                <div class="flex flex-col items-center bg-stone-100 m-2 p-2">
                    <svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px"
                        fill="#1f1f1f">
                        <path
                            d="M546.15-160v-40h129.23v40H546.15Zm-200 0v-40h141.54v40H346.15ZM180-566.15h-40v-129.23h40v129.23Zm0 200h-40v-141.54h40v141.54ZM287.69-160h-83.07q-27.62 0-46.12-18.5Q140-197 140-224.61v-83.08h40v83.08q0 9.23 7.69 16.92 7.69 7.69 16.93 7.69h83.07v40ZM456-448.46l84-84 84 84L651.54-476l-84-84 84-84L624-671.54l-84 84-84-84L428.46-644l84 84-84 84L456-448.46ZM324.62-280q-27.62 0-46.12-18.5Q260-317 260-344.62v-430.76q0-27.62 18.5-46.12Q297-840 324.62-840h430.76q27.62 0 46.12 18.5Q820-803 820-775.38v430.76q0 27.62-18.5 46.12Q783-280 755.38-280H324.62Zm0-40h430.76q9.24 0 16.93-7.69 7.69-7.69 7.69-16.93v-430.76q0-9.24-7.69-16.93-7.69-7.69-16.93-7.69H324.62q-9.24 0-16.93 7.69-7.69 7.69-7.69 16.93v430.76q0 9.24 7.69 16.93 7.69 7.69 16.93 7.69ZM300-800v480-480Z" />
                    </svg>
                    <span class="flex align-bottom text-xs text-gray-500 ml-2">
                        El estudio está en proceso
                    </span>
                </div>
            </div>
        </div>
        <div class="flex items-center min-w-1/3">
            <label for="search" class="mb-2 text-sm font-medium text-gray-900 sr-only">Buscar</label>
            <div class="relative w-full">
                <div class="absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none">
                    <svg class="w-4 h-4 text-gray-500 dark:text-gray-400" aria-hidden="true"
                        xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z" />
                    </svg>
                </div>
                <input type="text" wire:model.live="search" id="search"
                    class="block w-full p-4 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500"
                    placeholder="Ingresa la busqueda..." />
            </div>
        </div>
    </div>
    <div>
        <table class="table-fixed w-full divide-y shadow-md divide-neutral-200/70">
            <thead>
                <tr class="text-neutral-800">
                    <th class="px-5 py-3 text-xs text-left uppercase">
                        <span class="flex items-center">
                            Nombre
                        </span>
                    </th>
                    <th class="px-5 py-3 text-xs text-left uppercase">
                        <span class="flex items-center">
                            Estudio
                        </span>
                    </th>
                    <th class="px-5 py-3 text-xs text-left uppercase">
                        <span class="flex items-center">
                            Fecha de solicitud
                        </span>
                    </th>
                    <th class="px-5 py-3 text-xs text-left uppercase">
                        <span class="flex items-center">
                            Edad
                        </span>
                    </th>
                    <th class="px-5 py-3 text-xs text-left uppercase">
                        <span class="flex items-center">
                            Identificación
                        </span>
                    </th>
                    <th class="px-5 py-3 text-xs text-left uppercase">
                        <span class="flex items-center">
                            Procedencia
                        </span>
                    </th>
                    <th class="px-5 py-3 text-xs text-left uppercase">
                        <span class="flex items-center">
                            email
                        </span>
                    </th>
                    <th class="px-5 py-3 text-xs text-left uppercase">
                        <span class="flex items-center">
                            Teléfono
                        </span>
                    </th>
                    <th class="px-5 py-3 text-xs text-left uppercase">
                        <div class="flex">
                            <span class="flex items-center mr-2">
                                Acción
                            </span>
                        </div>
                    </th>
                </tr>
            </thead>
            <tbody class="divide-y divide-neutral-200/70">
                <div class="w-full flex flex-wrap justify-between mt-3 py-2 px-4 bg-stone-50">
                    <div class="flex items-center">
                        <img src="{{ asset('images/calendar.svg') }}" width="24">
                        <span
                            class="flex align-bottom text-xs text-gray-500 ml-2">{{ now()->translatedFormat('l d \d\e F Y') }}</span>
                    </div>
                </div>
                @foreach ($estudios as $estudio)
                    <tr class="text-neutral-600 text-xs bg-neutral-50 hover:bg-slate-200">
                        <td class="px-2 w-48 truncate overflow-hidden whitespace-nowrap text-sm font-medium"
                            title="{{ $estudio->patient->name }} {{ $estudio->patient->first_surname }}">
                            {{ $estudio->patient->name }} {{ $estudio->patient->first_surname }}
                        </td>
                        <td class="px-2 w-48 truncate overflow-hidden whitespace-nowrap"
                            title="{{ $estudio->listEstudio->name }}">{{ $estudio->listEstudio->name }}</td>
                        <td class="px-2 whitespace-nowrap">{{ $estudio->created_at }}</td>
                        <td class="px-2 whitespace-nowrap">{{ $estudio->patient->age }} años</td>
                        <td class="px-2 whitespace-nowrap">
                            {{ $estudio->patient->document }}
                        </td>
                        <td class="px-2 w-48 truncate overflow-hidden whitespace-nowrap"
                            title="{{ $estudio->exam->departurePlace->name }}">
                            {{ $estudio->exam->departurePlace->name }}
                        </td>
                        <td class="px-2 w-48 truncate overflow-hidden whitespace-nowrap"
                            title="{{ $estudio->patient->email }}">{{ $estudio->patient->email }}</td>
                        <td class="px-2 whitespace-nowrap">{{ $estudio->patient->phone }}</td>
                        <td>
                            <div class="flex">
                                @if (Auth::user()->role === 'Especialista')
                                    @if ($estudio->study_state === 'Finalizado')
                                        <button wire:click="openDrawerAddendum('{{ $estudio->id }}')"
                                            class="cursor-pointer block border border-transparent hover:border-gray-400 focus:outline-none rounded-lg p-[3px] m-1"
                                            type="button" title="Addendum">
                                            <svg xmlns="http://www.w3.org/2000/svg" height="20px"
                                                viewBox="0 -960 960 960" width="20px" fill="#1ca30a">
                                                <path
                                                    d="M224.62-160q-26.85 0-45.74-18.88Q160-197.77 160-224.62v-510.76q0-26.85 18.88-45.74Q197.77-800 224.62-800h510.76q26.85 0 45.74 18.88Q800-762.23 800-735.38v238q-10.54-3.62-20.15-5.89-9.62-2.27-19.85-4.5v-227.61q0-9.24-7.69-16.93-7.69-7.69-16.93-7.69H224.62q-9.24 0-16.93 7.69-7.69 7.69-7.69 16.93v510.76q0 9.24 7.69 16.93 7.69 7.69 16.93 7.69h226.61q1.46 11.23 3.73 20.85 2.27 9.61 5.89 19.15H224.62ZM200-240v40-560V-507.77v-3V-240Zm100-69.23h158.38q2.24-10.23 6.04-19.85 3.81-9.61 7.96-20.15H300v40ZM300-460h263.23q19.69-13.85 38.81-23.46 19.11-9.62 41.04-15.08V-500H300v40Zm0-150.77h360v-40H300v40ZM720-75.38q-66.85 0-113.42-46.58Q560-168.54 560-235.38q0-66.85 46.58-113.43 46.57-46.57 113.42-46.57t113.42 46.57Q880-302.23 880-235.38q0 66.84-46.58 113.42Q786.85-75.38 720-75.38ZM704.62-120h30.76v-100h100v-30.77h-100v-100h-30.76v100h-100V-220h100v100Z" />
                                            </svg>
                                        </button>
                                        @if ($showDrawerAddendum && $estudio->id == $estudioId)
                                            <livewire:drawers.drawer-addendum :estudio="$estudio" />
                                        @endif
                                    @else
                                        <button
                                            class="cursor-not-allowed block p-[3px] m-1" type="button"
                                            title="Estudio en proceso" disabled>
                                            <svg xmlns="http://www.w3.org/2000/svg" height="20px"
                                                viewBox="0 -960 960 960" width="20px" fill="#1f1f1f">
                                                <path
                                                    d="M546.15-160v-40h129.23v40H546.15Zm-200 0v-40h141.54v40H346.15ZM180-566.15h-40v-129.23h40v129.23Zm0 200h-40v-141.54h40v141.54ZM287.69-160h-83.07q-27.62 0-46.12-18.5Q140-197 140-224.61v-83.08h40v83.08q0 9.23 7.69 16.92 7.69 7.69 16.93 7.69h83.07v40ZM456-448.46l84-84 84 84L651.54-476l-84-84 84-84L624-671.54l-84 84-84-84L428.46-644l84 84-84 84L456-448.46ZM324.62-280q-27.62 0-46.12-18.5Q260-317 260-344.62v-430.76q0-27.62 18.5-46.12Q297-840 324.62-840h430.76q27.62 0 46.12 18.5Q820-803 820-775.38v430.76q0 27.62-18.5 46.12Q783-280 755.38-280H324.62Zm0-40h430.76q9.24 0 16.93-7.69 7.69-7.69 7.69-16.93v-430.76q0-9.24-7.69-16.93-7.69-7.69-16.93-7.69H324.62q-9.24 0-16.93 7.69-7.69 7.69-7.69 16.93v430.76q0 9.24 7.69 16.93 7.69 7.69 16.93 7.69ZM300-800v480-480Z" />
                                            </svg>
                                        </button>
                                    @endif
                                @endif
                                <button wire:click="openDrawerDetailsEstudio({{ $estudio->id }})"
                                    class="cursor-pointer block border border-transparent hover:border-gray-400 focus:outline-none rounded-lg p-[3px] m-1"
                                    type="button" title="Ver detalles">
                                    <svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960"
                                        width="20px" fill="#007595">
                                        <path
                                            d="M480.18-353.85q60.97 0 103.47-42.68t42.5-103.65q0-60.97-42.68-103.47t-103.65-42.5q-60.97 0-103.47 42.68t-42.5 103.65q0 60.97 42.68 103.47t103.65 42.5ZM480-392q-45 0-76.5-31.5T372-500q0-45 31.5-76.5T480-608q45 0 76.5 31.5T588-500q0 45-31.5 76.5T480-392Zm.11 152q-129.96 0-236.88-70.73Q136.31-381.46 83.08-500q53.23-118.54 160.04-189.27T479.89-760q129.96 0 236.88 70.73Q823.69-618.54 876.92-500q-53.23 118.54-160.04 189.27T480.11-240ZM480-500Zm0 220q113 0 207.5-59.5T832-500q-50-101-144.5-160.5T480-720q-113 0-207.5 59.5T128-500q50 101 144.5 160.5T480-280Z" />
                                    </svg>
                                </button>
                                @if ($showDrawerDetailsEstudio && $estudio->id == $estudioId)
                                    <livewire:drawers.drawer-details-estudio :estudio="$estudio" />
                                @endif
                            </div>
                        </td>
                    </tr>
                @endforeach
            </tbody>
        </table>
        <div class="mt-4 flex justify-center">
            {{ $estudios->links('vendor.livewire.custom-pagination') }}
        </div>
    </div>

</div>
